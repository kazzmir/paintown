# Warning: changing the default_options requires a new build directory and doing 'meson setup ...' again
project('paintown', ['c', 'cpp'], default_options: ['cpp_std=c++11'])

includes = include_directories('src')
dumb_includes = include_directories('src/r-tech1/libs/dumb/include')
all_code = [
  'src/xmain.cpp',
  'src/main-menu.cpp',

  'src/r-tech1/configuration.cpp',
  'src/r-tech1/input/keyboard.cpp',
  'src/r-tech1/file-system.cpp',
  'src/r-tech1/debug.cpp',
  'src/r-tech1/funcs.cpp',
  'src/r-tech1/tokenreader.cpp',
  'src/r-tech1/token.cpp',
  'src/r-tech1/exceptions/load_exception.cpp',
  'src/r-tech1/exceptions/exception.cpp',
  'src/r-tech1/graphics/bitmap.cpp',
  'src/r-tech1/graphics/gradient.cpp',
  'src/r-tech1/system.cpp',
  'src/r-tech1/version.cpp',
  'src/r-tech1/argument.cpp',
  'src/r-tech1/init.cpp',
  'src/r-tech1/input/input-manager.cpp',
  'src/r-tech1/input/touch.cpp',
  'src/r-tech1/input/input-source.cpp',
  'src/r-tech1/input/joystick.cpp',
  'src/r-tech1/sound/music.cpp',
  'src/r-tech1/sound/sound.cpp',
  'src/r-tech1/language-string.cpp',
  'src/r-tech1/font.cpp',
  'src/r-tech1/font_factory.cpp',
  'src/r-tech1/regex.cpp',
  'src/r-tech1/sound/audio.cpp',
  'src/r-tech1/menu/menu.cpp',
  'src/r-tech1/menu/font-info.cpp',
  'src/r-tech1/menu/menu_option.cpp',
  'src/r-tech1/menu/options.cpp',
  'src/r-tech1/menu/optionfactory.cpp',
  'src/r-tech1/loading.cpp',
  'src/r-tech1/directory.cpp',
  'src/r-tech1/thread.cpp',
  'src/r-tech1/utf.cpp',
  'src/r-tech1/system/init.cpp',
  'src/r-tech1/system/timer.cpp',
  'src/r-tech1/message-queue.cpp',
  'src/r-tech1/messages.cpp',
  'src/r-tech1/resource.cpp',
  'src/r-tech1/events.cpp',
  'src/r-tech1/sound/music-player.cpp',
  'src/r-tech1/sound/music-renderer.cpp',

  'src/r-tech1/gui/animation.cpp',
  'src/r-tech1/gui/box.cpp',
  'src/r-tech1/gui/container.cpp',
  'src/r-tech1/gui/context-box.cpp',
  'src/r-tech1/gui/coordinate.cpp',
  'src/r-tech1/gui/cutscene.cpp',
  'src/r-tech1/gui/fadetool.cpp',
  'src/r-tech1/gui/lineedit.cpp',
  'src/r-tech1/gui/list.cpp',
  'src/r-tech1/gui/popup-box.cpp',
  'src/r-tech1/gui/rectarea.cpp',
  'src/r-tech1/gui/scroll-list.cpp',
  'src/r-tech1/gui/select-list.cpp',
  'src/r-tech1/gui/tabbed-box.cpp',
  'src/r-tech1/gui/tab-container.cpp',
  'src/r-tech1/gui/timer.cpp',
  'src/r-tech1/gui/widget.cpp',

  'src/r-tech1/ftalleg.cpp',
  'src/r-tech1/input/sdl/joystick.cpp',
  'src/r-tech1/sound/sdl/sound.cpp',
  'src/r-tech1/graphics/sdl/bitmap.cpp',

  'src/r-tech1/libs/sfl/sfldir.c',

  'src/r-tech1/libs/dumb/src/it/itorder.c',
  'src/r-tech1/libs/dumb/src/it/xmeffect.c',
  'src/r-tech1/libs/dumb/src/it/itrender.c',
  'src/r-tech1/libs/dumb/src/it/itread2.c',
  'src/r-tech1/libs/dumb/src/it/itunload.c',
  'src/r-tech1/libs/dumb/src/it/loadmod.c',
  'src/r-tech1/libs/dumb/src/it/loads3m.c',
  'src/r-tech1/libs/dumb/src/it/loadxm2.c',
  'src/r-tech1/libs/dumb/src/it/itload2.c',
  'src/r-tech1/libs/dumb/src/it/readmod2.c',
  'src/r-tech1/libs/dumb/src/it/reads3m2.c',
  'src/r-tech1/libs/dumb/src/it/loadmod2.c',
  'src/r-tech1/libs/dumb/src/it/loadxm.c',
  'src/r-tech1/libs/dumb/src/it/loads3m2.c',
  'src/r-tech1/libs/dumb/src/it/itload.c',
  'src/r-tech1/libs/dumb/src/it/itmisc.c',
  'src/r-tech1/libs/dumb/src/it/itread.c',
  'src/r-tech1/libs/dumb/src/it/readxm.c',
  'src/r-tech1/libs/dumb/src/it/readmod.c',
  'src/r-tech1/libs/dumb/src/it/reads3m.c',
  'src/r-tech1/libs/dumb/src/it/readxm2.c',
  'src/r-tech1/libs/dumb/src/core/makeduh.c',
  'src/r-tech1/libs/dumb/src/core/unload.c',
  'src/r-tech1/libs/dumb/src/core/loadduh.c',
  'src/r-tech1/libs/dumb/src/core/rawsig.c',
  'src/r-tech1/libs/dumb/src/core/rendduh.c',
  'src/r-tech1/libs/dumb/src/core/rendsig.c',
  'src/r-tech1/libs/dumb/src/core/duhlen.c',
  'src/r-tech1/libs/dumb/src/core/duhtag.c',
  'src/r-tech1/libs/dumb/src/core/atexit.c',
  'src/r-tech1/libs/dumb/src/core/readduh.c',
  'src/r-tech1/libs/dumb/src/core/register.c',
  'src/r-tech1/libs/dumb/src/core/dumbfile.c',
  'src/r-tech1/libs/dumb/src/helpers/sampbuf.c',
  'src/r-tech1/libs/dumb/src/helpers/stdfile.c',
  'src/r-tech1/libs/dumb/src/helpers/clickrem.c',
  'src/r-tech1/libs/dumb/src/helpers/silence.c',
  'src/r-tech1/libs/dumb/src/helpers/memfile.c',
  'src/r-tech1/libs/dumb/src/helpers/resample.c',

  'src/r-tech1/libs/gme/Ay_Apu.cpp',
  'src/r-tech1/libs/gme/Ay_Cpu.cpp',
  'src/r-tech1/libs/gme/Ay_Emu.cpp',
  'src/r-tech1/libs/gme/Blip_Buffer.cpp',
  'src/r-tech1/libs/gme/Classic_Emu.cpp',
  'src/r-tech1/libs/gme/Data_Reader.cpp',
  'src/r-tech1/libs/gme/Dual_Resampler.cpp',
  'src/r-tech1/libs/gme/Effects_Buffer.cpp',
  'src/r-tech1/libs/gme/Fir_Resampler.cpp',
  'src/r-tech1/libs/gme/Gb_Apu.cpp',
  'src/r-tech1/libs/gme/Gb_Cpu.cpp',
  'src/r-tech1/libs/gme/Gb_Oscs.cpp',
  'src/r-tech1/libs/gme/Gbs_Emu.cpp',
  'src/r-tech1/libs/gme/gme.cpp',
  'src/r-tech1/libs/gme/Gme_File.cpp',
  'src/r-tech1/libs/gme/Gym_Emu.cpp',
  'src/r-tech1/libs/gme/Hes_Apu.cpp',
  'src/r-tech1/libs/gme/Hes_Cpu.cpp',
  'src/r-tech1/libs/gme/Hes_Emu.cpp',
  'src/r-tech1/libs/gme/Kss_Cpu.cpp',
  'src/r-tech1/libs/gme/Kss_Emu.cpp',
  'src/r-tech1/libs/gme/Kss_Scc_Apu.cpp',
  'src/r-tech1/libs/gme/M3u_Playlist.cpp',
  'src/r-tech1/libs/gme/Multi_Buffer.cpp',
  'src/r-tech1/libs/gme/Music_Emu.cpp',
  'src/r-tech1/libs/gme/Nes_Apu.cpp',
  'src/r-tech1/libs/gme/Nes_Cpu.cpp',
  'src/r-tech1/libs/gme/Nes_Fme7_Apu.cpp',
  'src/r-tech1/libs/gme/Nes_Namco_Apu.cpp',
  'src/r-tech1/libs/gme/Nes_Oscs.cpp',
  'src/r-tech1/libs/gme/Nes_Vrc6_Apu.cpp',
  'src/r-tech1/libs/gme/Nsfe_Emu.cpp',
  'src/r-tech1/libs/gme/Nsf_Emu.cpp',
  'src/r-tech1/libs/gme/Sap_Apu.cpp',
  'src/r-tech1/libs/gme/Sap_Cpu.cpp',
  'src/r-tech1/libs/gme/Sap_Emu.cpp',
  'src/r-tech1/libs/gme/Sms_Apu.cpp',
  'src/r-tech1/libs/gme/Snes_Spc.cpp',
  'src/r-tech1/libs/gme/Spc_Cpu.cpp',
  'src/r-tech1/libs/gme/Spc_Dsp.cpp',
  'src/r-tech1/libs/gme/Spc_Emu.cpp',
  'src/r-tech1/libs/gme/Spc_Filter.cpp',
  'src/r-tech1/libs/gme/Vgm_Emu.cpp',
  'src/r-tech1/libs/gme/Vgm_Emu_Impl.cpp',
  'src/r-tech1/libs/gme/Ym2413_Emu.cpp',
  'src/r-tech1/libs/gme/Ym2612_Emu.cpp',

  'src/r-tech1/libs/7z/7zAlloc.c',
  'src/r-tech1/libs/7z/7zBuf.c',
  'src/r-tech1/libs/7z/7zBuf2.c',
  'src/r-tech1/libs/7z/7zCrc.c',
  'src/r-tech1/libs/7z/7zCrcOpt.c',
  'src/r-tech1/libs/7z/7zDec.c',
  'src/r-tech1/libs/7z/7zIn.c',
  'src/r-tech1/libs/7z/CpuArch.c',
  'src/r-tech1/libs/7z/LzmaDec.c',
  'src/r-tech1/libs/7z/Lzma2Dec.c',
  'src/r-tech1/libs/7z/Bra.c',
  'src/r-tech1/libs/7z/Bra86.c',
  'src/r-tech1/libs/7z/Bcj2.c',
  'src/r-tech1/libs/7z/7zFile.c',
  'src/r-tech1/libs/7z/7zStream.c',

  'src/r-tech1/libs/zip/ioapi.c',
  'src/r-tech1/libs/zip/unzip.c',
  'src/r-tech1/libs/zip/zip.c',

  'src/factory/collector.cpp',
  'src/paintown-engine/game/mod.cpp',
  'src/paintown-engine/game/argument.cpp',
  'src/paintown-engine/game/options.cpp',

  'src/mugen/argument.cpp',
  'src/mugen/option-options.cpp',
  'src/mugen/exception.cpp',
  ]

add_global_arguments('-DUSE_SDL=1', language: 'cpp')
add_global_arguments('-DDATA_PATH="data"', language: 'cpp')

sdl_dependency = dependency('sdl', required: true)
freetype_dependency = dependency('freetype2', required: true)
zlib_dependency = dependency('zlib', required: true)

executable('paintown', all_code, include_directories: [includes, dumb_includes], dependencies: [sdl_dependency, freetype_dependency, zlib_dependency])
