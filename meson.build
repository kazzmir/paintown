# Warning: changing the default_options requires a new build directory and doing 'meson setup ...' again
project('paintown', ['c', 'cpp'], default_options: ['cpp_std=c++11'])

includes = include_directories('src')
dumb_includes = include_directories('src/r-tech1/libs/dumb/include')
all_code = [
  'src/xmain.cpp',
  'src/main-menu.cpp',

  'src/r-tech1/configuration.cpp',
  'src/r-tech1/input/keyboard.cpp',
  'src/r-tech1/file-system.cpp',
  'src/r-tech1/debug.cpp',
  'src/r-tech1/funcs.cpp',
  'src/r-tech1/tokenreader.cpp',
  'src/r-tech1/token.cpp',
  'src/r-tech1/exceptions/load_exception.cpp',
  'src/r-tech1/exceptions/exception.cpp',
  'src/r-tech1/graphics/bitmap.cpp',
  'src/r-tech1/graphics/gradient.cpp',
  'src/r-tech1/system.cpp',
  'src/r-tech1/version.cpp',
  'src/r-tech1/argument.cpp',
  'src/r-tech1/init.cpp',
  'src/r-tech1/input/input-manager.cpp',
  'src/r-tech1/input/touch.cpp',
  'src/r-tech1/input/input-source.cpp',
  'src/r-tech1/input/joystick.cpp',
  'src/r-tech1/input/text-input.cpp',
  'src/r-tech1/sound/music.cpp',
  'src/r-tech1/sound/sound.cpp',
  'src/r-tech1/language-string.cpp',
  'src/r-tech1/font.cpp',
  'src/r-tech1/font_factory.cpp',
  'src/r-tech1/regex.cpp',
  'src/r-tech1/sound/audio.cpp',
  'src/r-tech1/menu/menu.cpp',
  'src/r-tech1/menu/font-info.cpp',
  'src/r-tech1/menu/menu_option.cpp',
  'src/r-tech1/menu/options.cpp',
  'src/r-tech1/menu/optionfactory.cpp',
  'src/r-tech1/loading.cpp',
  'src/r-tech1/directory.cpp',
  'src/r-tech1/thread.cpp',
  'src/r-tech1/utf.cpp',
  'src/r-tech1/system/init.cpp',
  'src/r-tech1/system/timer.cpp',
  'src/r-tech1/message-queue.cpp',
  'src/r-tech1/messages.cpp',
  'src/r-tech1/resource.cpp',
  'src/r-tech1/events.cpp',
  'src/r-tech1/sound/music-player.cpp',
  'src/r-tech1/sound/music-renderer.cpp',
  'src/r-tech1/console.cpp',
  'src/r-tech1/timedifference.cpp',

  'src/r-tech1/network/chat.cpp',
  'src/r-tech1/network/irc.cpp',
  'src/r-tech1/network/network.cpp',
  
  'src/r-tech1/ebox.cpp',

  'src/r-tech1/gui/animation.cpp',
  'src/r-tech1/gui/box.cpp',
  'src/r-tech1/gui/container.cpp',
  'src/r-tech1/gui/context-box.cpp',
  'src/r-tech1/gui/coordinate.cpp',
  'src/r-tech1/gui/cutscene.cpp',
  'src/r-tech1/gui/fadetool.cpp',
  'src/r-tech1/gui/lineedit.cpp',
  'src/r-tech1/gui/list.cpp',
  'src/r-tech1/gui/popup-box.cpp',
  'src/r-tech1/gui/rectarea.cpp',
  'src/r-tech1/gui/scroll-list.cpp',
  'src/r-tech1/gui/select-list.cpp',
  'src/r-tech1/gui/tabbed-box.cpp',
  'src/r-tech1/gui/tab-container.cpp',
  'src/r-tech1/gui/timer.cpp',
  'src/r-tech1/gui/widget.cpp',

  'src/r-tech1/ftalleg.cpp',
  'src/r-tech1/input/sdl/joystick.cpp',
  'src/r-tech1/sound/sdl/sound.cpp',
  'src/r-tech1/graphics/sdl/bitmap.cpp',

  'src/r-tech1/libs/sfl/sfldir.c',
  'src/r-tech1/libs/sfl/sflmem.c',
  'src/r-tech1/libs/sfl/sfldate.c',
  'src/r-tech1/libs/sfl/sflfile.c',
  'src/r-tech1/libs/sfl/sflstr.c',
  'src/r-tech1/libs/sfl/sfluid.c',
  'src/r-tech1/libs/sfl/sfllist.c',
  'src/r-tech1/libs/sfl/sflnode.c',
  'src/r-tech1/libs/sfl/sflenv.c',
  'src/r-tech1/libs/sfl/sfltok.c',
  'src/r-tech1/libs/sfl/sflcvsb.c',
  'src/r-tech1/libs/sfl/sflsymb.c',
  'src/r-tech1/libs/sfl/sflconv.c',

  'src/r-tech1/libs/dumb/src/it/itorder.c',
  'src/r-tech1/libs/dumb/src/it/xmeffect.c',
  'src/r-tech1/libs/dumb/src/it/itrender.c',
  'src/r-tech1/libs/dumb/src/it/itread2.c',
  'src/r-tech1/libs/dumb/src/it/itunload.c',
  'src/r-tech1/libs/dumb/src/it/loadmod.c',
  'src/r-tech1/libs/dumb/src/it/loads3m.c',
  'src/r-tech1/libs/dumb/src/it/loadxm2.c',
  'src/r-tech1/libs/dumb/src/it/itload2.c',
  'src/r-tech1/libs/dumb/src/it/readmod2.c',
  'src/r-tech1/libs/dumb/src/it/reads3m2.c',
  'src/r-tech1/libs/dumb/src/it/loadmod2.c',
  'src/r-tech1/libs/dumb/src/it/loadxm.c',
  'src/r-tech1/libs/dumb/src/it/loads3m2.c',
  'src/r-tech1/libs/dumb/src/it/itload.c',
  'src/r-tech1/libs/dumb/src/it/itmisc.c',
  'src/r-tech1/libs/dumb/src/it/itread.c',
  'src/r-tech1/libs/dumb/src/it/readxm.c',
  'src/r-tech1/libs/dumb/src/it/readmod.c',
  'src/r-tech1/libs/dumb/src/it/reads3m.c',
  'src/r-tech1/libs/dumb/src/it/readxm2.c',
  'src/r-tech1/libs/dumb/src/core/makeduh.c',
  'src/r-tech1/libs/dumb/src/core/unload.c',
  'src/r-tech1/libs/dumb/src/core/loadduh.c',
  'src/r-tech1/libs/dumb/src/core/rawsig.c',
  'src/r-tech1/libs/dumb/src/core/rendduh.c',
  'src/r-tech1/libs/dumb/src/core/rendsig.c',
  'src/r-tech1/libs/dumb/src/core/duhlen.c',
  'src/r-tech1/libs/dumb/src/core/duhtag.c',
  'src/r-tech1/libs/dumb/src/core/atexit.c',
  'src/r-tech1/libs/dumb/src/core/readduh.c',
  'src/r-tech1/libs/dumb/src/core/register.c',
  'src/r-tech1/libs/dumb/src/core/dumbfile.c',
  'src/r-tech1/libs/dumb/src/helpers/sampbuf.c',
  'src/r-tech1/libs/dumb/src/helpers/stdfile.c',
  'src/r-tech1/libs/dumb/src/helpers/clickrem.c',
  'src/r-tech1/libs/dumb/src/helpers/silence.c',
  'src/r-tech1/libs/dumb/src/helpers/memfile.c',
  'src/r-tech1/libs/dumb/src/helpers/resample.c',

  'src/r-tech1/libs/pcre/pcre_chartables.c',
  'src/r-tech1/libs/pcre/pcre_compile.c',
  'src/r-tech1/libs/pcre/pcre_config.c',
  'src/r-tech1/libs/pcre/pcre_dfa_exec.c',
  'src/r-tech1/libs/pcre/pcre_exec.c',
  'src/r-tech1/libs/pcre/pcre_fullinfo.c',
  'src/r-tech1/libs/pcre/pcre_get.c',
  'src/r-tech1/libs/pcre/pcre_globals.c',
  'src/r-tech1/libs/pcre/pcre_info.c',
  'src/r-tech1/libs/pcre/pcre_maketables.c',
  'src/r-tech1/libs/pcre/pcre_newline.c',
  'src/r-tech1/libs/pcre/pcre_ord2utf8.c',
  'src/r-tech1/libs/pcre/pcreposix.c',
  'src/r-tech1/libs/pcre/pcre_refcount.c',
  'src/r-tech1/libs/pcre/pcre_study.c',
  'src/r-tech1/libs/pcre/pcre_tables.c',
  'src/r-tech1/libs/pcre/pcre_try_flipped.c',
  'src/r-tech1/libs/pcre/pcre_ucd.c',
  'src/r-tech1/libs/pcre/pcre_valid_utf8.c',
  'src/r-tech1/libs/pcre/pcre_version.c',
  'src/r-tech1/libs/pcre/pcre_xclass.c',

  'src/r-tech1/libs/gme/Ay_Apu.cpp',
  'src/r-tech1/libs/gme/Ay_Cpu.cpp',
  'src/r-tech1/libs/gme/Ay_Emu.cpp',
  'src/r-tech1/libs/gme/Blip_Buffer.cpp',
  'src/r-tech1/libs/gme/Classic_Emu.cpp',
  'src/r-tech1/libs/gme/Data_Reader.cpp',
  'src/r-tech1/libs/gme/Dual_Resampler.cpp',
  'src/r-tech1/libs/gme/Effects_Buffer.cpp',
  'src/r-tech1/libs/gme/Fir_Resampler.cpp',
  'src/r-tech1/libs/gme/Gb_Apu.cpp',
  'src/r-tech1/libs/gme/Gb_Cpu.cpp',
  'src/r-tech1/libs/gme/Gb_Oscs.cpp',
  'src/r-tech1/libs/gme/Gbs_Emu.cpp',
  'src/r-tech1/libs/gme/gme.cpp',
  'src/r-tech1/libs/gme/Gme_File.cpp',
  'src/r-tech1/libs/gme/Gym_Emu.cpp',
  'src/r-tech1/libs/gme/Hes_Apu.cpp',
  'src/r-tech1/libs/gme/Hes_Cpu.cpp',
  'src/r-tech1/libs/gme/Hes_Emu.cpp',
  'src/r-tech1/libs/gme/Kss_Cpu.cpp',
  'src/r-tech1/libs/gme/Kss_Emu.cpp',
  'src/r-tech1/libs/gme/Kss_Scc_Apu.cpp',
  'src/r-tech1/libs/gme/M3u_Playlist.cpp',
  'src/r-tech1/libs/gme/Multi_Buffer.cpp',
  'src/r-tech1/libs/gme/Music_Emu.cpp',
  'src/r-tech1/libs/gme/Nes_Apu.cpp',
  'src/r-tech1/libs/gme/Nes_Cpu.cpp',
  'src/r-tech1/libs/gme/Nes_Fme7_Apu.cpp',
  'src/r-tech1/libs/gme/Nes_Namco_Apu.cpp',
  'src/r-tech1/libs/gme/Nes_Oscs.cpp',
  'src/r-tech1/libs/gme/Nes_Vrc6_Apu.cpp',
  'src/r-tech1/libs/gme/Nsfe_Emu.cpp',
  'src/r-tech1/libs/gme/Nsf_Emu.cpp',
  'src/r-tech1/libs/gme/Sap_Apu.cpp',
  'src/r-tech1/libs/gme/Sap_Cpu.cpp',
  'src/r-tech1/libs/gme/Sap_Emu.cpp',
  'src/r-tech1/libs/gme/Sms_Apu.cpp',
  'src/r-tech1/libs/gme/Snes_Spc.cpp',
  'src/r-tech1/libs/gme/Spc_Cpu.cpp',
  'src/r-tech1/libs/gme/Spc_Dsp.cpp',
  'src/r-tech1/libs/gme/Spc_Emu.cpp',
  'src/r-tech1/libs/gme/Spc_Filter.cpp',
  'src/r-tech1/libs/gme/Vgm_Emu.cpp',
  'src/r-tech1/libs/gme/Vgm_Emu_Impl.cpp',
  'src/r-tech1/libs/gme/Ym2413_Emu.cpp',
  'src/r-tech1/libs/gme/Ym2612_Emu.cpp',

  'src/r-tech1/libs/7z/7zAlloc.c',
  'src/r-tech1/libs/7z/7zBuf.c',
  'src/r-tech1/libs/7z/7zBuf2.c',
  'src/r-tech1/libs/7z/7zCrc.c',
  'src/r-tech1/libs/7z/7zCrcOpt.c',
  'src/r-tech1/libs/7z/7zDec.c',
  'src/r-tech1/libs/7z/7zIn.c',
  'src/r-tech1/libs/7z/CpuArch.c',
  'src/r-tech1/libs/7z/LzmaDec.c',
  'src/r-tech1/libs/7z/Lzma2Dec.c',
  'src/r-tech1/libs/7z/Bra.c',
  'src/r-tech1/libs/7z/Bra86.c',
  'src/r-tech1/libs/7z/Bcj2.c',
  'src/r-tech1/libs/7z/7zFile.c',
  'src/r-tech1/libs/7z/7zStream.c',

  'src/r-tech1/libs/zip/ioapi.c',
  'src/r-tech1/libs/zip/unzip.c',
  'src/r-tech1/libs/zip/zip.c',

  'src/factory/collector.cpp',
  'src/factory/font_render.cpp',

  'src/paintown-engine/game/mod.cpp',
  'src/paintown-engine/game/argument.cpp',
  'src/paintown-engine/game/options.cpp',
  'src/paintown-engine/game/nameplacer.cpp',

  'src/paintown-engine/game/adventure_world.cpp',
  'src/paintown-engine/game/character-select.cpp',
  'src/paintown-engine/game/game.cpp',
  'src/paintown-engine/game/move-list.cpp',
  'src/paintown-engine/game/select_player.cpp',
  'src/paintown-engine/game/world.cpp',

  'src/paintown-engine/script/script.cpp',

  'src/paintown-engine/network/cacher.cpp',
  'src/paintown-engine/network/chat_client.cpp',
  'src/paintown-engine/network/chat_server.cpp',
  'src/paintown-engine/network/chat-widget.cpp',
  'src/paintown-engine/network/client.cpp',
  'src/paintown-engine/network/network.cpp',
  'src/paintown-engine/network/network_world_client.cpp',
  'src/paintown-engine/network/network_world.cpp',
  'src/paintown-engine/network/server.cpp',

  'src/paintown-engine/object/actor.cpp',
  'src/paintown-engine/object/alliance.cpp',
  'src/paintown-engine/object/animation.cpp',
  'src/paintown-engine/object/animation_event.cpp',
  'src/paintown-engine/object/animation_trail.cpp',
  'src/paintown-engine/object/attack.cpp',
  'src/paintown-engine/object/buddy_player.cpp',
  'src/paintown-engine/object/cat.cpp',
  'src/paintown-engine/object/character.cpp',
  'src/paintown-engine/object/display_character.cpp',
  'src/paintown-engine/object/draw-effect.cpp',
  'src/paintown-engine/object/effect.cpp',
  'src/paintown-engine/object/enemy.cpp',
  'src/paintown-engine/object/gib.cpp',
  'src/paintown-engine/object/item.cpp',
  'src/paintown-engine/object/network_character.cpp',
  'src/paintown-engine/object/network_player.cpp',
  'src/paintown-engine/object/object_attack.cpp',
  'src/paintown-engine/object/object.cpp',
  'src/paintown-engine/object/object_nonattack.cpp',
  'src/paintown-engine/object/player-common.cpp',
  'src/paintown-engine/object/player.cpp',
  'src/paintown-engine/object/projectile.cpp',
  'src/paintown-engine/object/stimulation.cpp',
  'src/paintown-engine/object/trigger.cpp',

  'src/paintown-engine/factory/object_factory.cpp',
  'src/paintown-engine/level/block.cpp',
  'src/paintown-engine/level/blockobject.cpp',
  'src/paintown-engine/level/cacher.cpp',
  'src/paintown-engine/level/random-scene.cpp',
  'src/paintown-engine/level/scene.cpp',
  'src/paintown-engine/level/utils.cpp',
  'src/paintown-engine/trigger/trigger.cpp',

  'src/paintown-engine/environment/atmosphere.cpp',

  'src/openbor/animation.cpp',
  'src/openbor/data.cpp',
  'src/openbor/display-character.cpp',
  'src/openbor/mod.cpp',
  'src/openbor/pack-reader.cpp',
  'src/openbor/util.cpp',

  'src/globals.cpp',

  'src/mugen/argument.cpp',
  'src/mugen/option-options.cpp',
  'src/mugen/exception.cpp',
  'src/mugen/config.cpp',

  'src/mugen/animation.cpp',
  'src/mugen/background.cpp',
  'src/mugen/behavior.cpp',
  'src/mugen/character.cpp',
  'src/mugen/characterhud.cpp',
  'src/mugen/character-select.cpp',
  'src/mugen/command.cpp',
  'src/mugen/compiler.cpp',
  'src/mugen/constraint.cpp',
  'src/mugen/effect.cpp',
  'src/mugen/font.cpp',
  'src/mugen/game.cpp',
  'src/mugen/helper.cpp',
  'src/mugen/item-content.cpp',
  'src/mugen/item.cpp',
  'src/mugen/match.cpp',
  'src/mugen/menu.cpp',
  'src/mugen/network-behavior.cpp',
  'src/mugen/network.cpp',
  'src/mugen/parse-cache.cpp',
  'src/mugen/projectile.cpp',
  'src/mugen/random.cpp',
  'src/mugen/reader.cpp',
  'src/mugen/run-match.cpp',
  'src/mugen/search.cpp',
  'src/mugen/section.cpp',
  'src/mugen/serialize-auto.cpp',
  'src/mugen/serialize.cpp',
  'src/mugen/sff.cpp',
  'src/mugen/sound.cpp',
  'src/mugen/sprite.cpp',
  'src/mugen/stage.cpp',
  'src/mugen/state-controller.cpp',
  'src/mugen/state.cpp',
  'src/mugen/storyboard.cpp',
  'src/mugen/util.cpp',
  'src/mugen/versus.cpp',
  'src/mugen/widgets.cpp',
  'src/mugen/world.cpp',

  'src/mugen/parser/air.cpp',
  'src/mugen/parser/cmd.cpp',
  'src/mugen/parser/def.cpp',
  'src/mugen/parser/parse-exception.cpp',
  'src/mugen/ast/ast.cpp',

  ]

add_global_arguments('-DUSE_SDL=1', language: 'cpp')
add_global_arguments('-DDATA_PATH="data"', language: 'cpp')

add_global_arguments('-g3', language: ['cpp', 'c'])

sdl_dependency = dependency('sdl', required: true)
freetype_dependency = dependency('freetype2', required: true)
zlib_dependency = dependency('zlib', required: true)

executable('paintown', all_code, include_directories: [includes, dumb_includes], dependencies: [sdl_dependency, freetype_dependency, zlib_dependency])
